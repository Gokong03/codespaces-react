<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Kasir Offline — Multi Saldo</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<header class="appbar">
  <button class="btn" id="btnMenu" aria-label="Menu">☰</button>
  <div class="avatar" id="logoBox" aria-hidden="true"><span>🧾</span></div>
  <div>
    <div id="headerTitle" style="font-weight:700">Kasir Multi Saldo</div>
    <div class="sub" id="appMode">Offline • localStorage</div>
  </div>
  <span class="right"></span>
  <span class="pill" id="whoami">👤 Admin</span>
</header>

<!-- Drawer / Burger -->
<div class="drawer" id="drawer" aria-hidden="true">
  <div class="panel">
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
      <div class="avatar" style="width:50px;height:50px"><img id="logoSide" class="logo" alt=""></div>
      <div>
        <b id="shopNameSide">Nama Toko</b>
        <div class="sub" id="shopAddrSide">Alamat</div>
      </div>
      <span class="right"></span>
      <button class="btn" id="closeDrawer" aria-label="Tutup">✕</button>
    </div>
    <nav class="menu">
      <a href="#" data-go="fisik">📦 Transaksi Fisik</a>
      <a href="#" data-go="digital">💳 Transaksi Digital</a>
      <a href="#" data-go="history">📜 History</a>
      <a href="#" data-go="rekap">📈 Rekap</a>
      <hr style="border-color:var(--muted)">
      <a href="#" data-go="saldo">💼 Saldo Akun</a>
      <a href="#" data-go="stok">🏷️ Stok Barang</a>
      <a href="#" data-go="audit">🧮 Audit Stok</a>
      <a href="#" data-go="inout">💸 Pemasukan & Pengeluaran</a>
      <a href="#" data-go="settings">⚙️ Pengaturan</a>
      <hr style="border-color:var(--muted)">
      <a href="#" id="doBackup">⬇️ Backup (JSON)</a>
      <a href="#" id="doRestore">⬆️ Restore (JSON)</a>
      <a href="#" id="doReset" style="color:#ff9a9a">🗑️ Reset Semua</a>
      <hr style="border-color:var(--muted)">
      <a href="#" id="doLock">🔒 Logout / Kunci</a>
    </nav>
  </div>
  <div class="mask" id="mask" role="button" tabindex="0" aria-label="Tutup menu"></div>
</div>

<main id="view" class="wrap grid">
  <!-- ===== FISIK ===== -->
  <section id="page-fisik" class="grid">
    <div class="card">
      <h3 class="title">Transaksi Fisik</h3>

      <div class="form-grid-2col">
        <!-- Kolom Kiri -->
        <div>
          <label>Kode Barang</label>
          <div class="row" style="grid-template-columns:1fr auto;align-items:center;">
            <input id="fKode" class="input" placeholder="Scan / ketik kode" />
            <button id="btnAuto" title="Ambil dari stok" class="btn" style="padding:12px">↻</button>
          </div>

          <label class="mt8">Nama Barang</label>
          <input id="fNama" class="input" placeholder="Otomatis dari stok" readonly />

          <div class="row cols-2 mt8">
              <div><label>Harga Beli</label><input id="fBeli" class="input" readonly /></div>
              <div><label>Harga Jual</label><input id="fJual" class="input" readonly /></div>
          </div>
        </div>

        <!-- Kolom Kanan -->
        <div>
          <label>Tanggal</label>
          <input id="fDate" class="input" type="date" />

          <div class="row cols-2 mt8">
            <div><label>Qty</label><input id="fQty" class="input" type="number" min="1" value="1" /></div>
            <div><label>Jenis</label>
              <select id="fJenis" class="input">
                <option value="jual">Penjualan (stok-, saldo+)</option>
                <option value="beli">Pembelian (stok+, saldo-)</option>
                <option value="retur">Retur Beli (stok-, saldo+)</option>
              </select>
            </div>
          </div>

          <label class="mt8">Akun Saldo</label>
          <select id="fAkun" class="input"></select>
        </div>
      </div>

      <!-- Stats & Tombol Aksi -->
      <div class="row cols-3 mt16">
        <div class="stat"><span class="sub">Modal</span><b id="fModal">Rp 0</b></div>
        <div class="stat"><span class="sub">Penjualan</span><b id="fOmzet">Rp 0</b></div>
        <div class="stat"><span class="sub">Laba</span><b id="fLaba">Rp 0</b></div>
      </div>

      <div class="row cols-2 mt16">
        <button id="fSave" class="btn primary">Simpan Transaksi</button>
        <button id="fClear" class="btn ghost">Bersihkan</button>
      </div>
      <div class="sub mt8">Nama & harga otomatis dari stok. Penjualan dicegah bila stok habis.</div>
    </div>
  </section>

  <!-- ===== DIGITAL ===== -->
  <section id="page-digital" class="grid hidden">
    <div class="card">
      <h3 class="title">Transaksi Digital</h3>
      <div class="row cols-3">
        <div><label>Tanggal</label><input id="dDate" class="input" type="date" /></div>
        <div><label>Akun Saldo</label><select id="dAkun" class="input"></select></div>
        <div><label>Jenis</label>
          <select id="dJenis" class="input">
            <option value="jual">Penjualan</option>
            <option value="beli">Pembelian</option>
            <option value="tarik">Jasa (Tarik/Transfer)</option>
          </select>
        </div>
      </div>
      <div id="dInputs">
        <div class="row cols-3 mt8" id="dModeJualBeli">
          <div><label>Harga Beli (Modal)</label><input id="dBeli" class="input" type="number" value="0" /></div>
          <div><label>Harga Jual (Omzet)</label><input id="dJual" class="input" type="number" value="0" /></div>
          <div><label>Laba</label><div class="stat" style="padding: 12px;"><b id="dLaba">Rp 0</b></div></div>
        </div>
        <div class="row cols-2 mt8 hidden" id="dModeTarik">
          <div><label>Jumlah Pokok</label><input id="dPokok" class="input" type="number" value="0" /></div>
          <div><label>Fee / Biaya Admin</label><input id="dFee" class="input" type="number" value="0" /></div>
        </div>
      </div>
      <label class="mt8">Deskripsi</label>
      <input id="dDesc" class="input" placeholder="Keterangan (opsional)" />
      <div class="row cols-2 mt16">
        <button id="dSave" class="btn primary">Simpan</button>
        <button id="dClear" class="btn ghost">Bersihkan</button>
      </div>
    </div>
  </section>

  <!-- ===== HISTORY ===== -->
  <section id="page-history" class="grid hidden">
    <div class="card">
      <h3 class="title">History Transaksi</h3>
      <div class="row cols-4" style="grid-template-columns:repeat(4,1fr)">
        <select id="hScope" class="input">
          <option value="day">Harian</option>
          <option value="week">Mingguan</option>
          <option value="month" selected>Bulanan</option>
          <option value="custom">Custom</option>
          <option value="all">Semua</option>
        </select>
        <select id="hAkun" class="input"></select>
        <input id="hFrom" class="input" type="date" />
        <input id="hTo" class="input" type="date" />
      </div>
      <div class="row cols-3 mt8">
        <input id="hSearch" class="input" placeholder="Cari (kode/nama/akun/deskripsi)" />
        <button id="hClear" class="btn">Bersihkan Filter</button>
        <div class="pill right" id="hSum">Total: Rp 0</div>
      </div>
      <div id="hList" class="mt16"></div>
    </div>
  </section>

  <!-- ===== REKAP ===== -->
  <section id="page-rekap" class="grid hidden">
    <div class="card">
      <h3 class="title">Rekap</h3>
      <div class="seg" id="rkSeg">
        <button data-s="day" class="on">Harian</button>
        <button data-s="week">Mingguan</button>
        <button data-s="month">Bulanan</button>
      </div>
      <div class="row cols-3 mt12">
        <input id="rDate" class="input" type="date" />
        <select id="rAkun" class="input"></select>
        <div class="row" style="grid-template-columns:1fr auto auto;align-items:center">
          <input id="rkTitle" class="input" placeholder="Judul / periode (editable)" />
          <button class="btn" id="btnShare">Bagikan PNG</button>
          <button class="btn" id="btnPrint">Print</button>
        </div>
      </div>

      <div id="rkEditable" class="card mt12">
        <div style="display:flex;gap:12px;align-items:center">
          <div class="avatar"><img id="rkLogo" class="logo" alt=""></div>
          <div>
            <b id="rkName">Nama Usaha</b>
            <div class="sub" id="rkAddr">Alamat • WA</div>
          </div>
        </div>
        <hr style="border-color:var(--muted);margin:12px 0" />
        <div id="rkBody">Belum ada data.</div>
      </div>
    </div>
  </section>

  <!-- ===== SALDO ===== -->
  <section id="page-saldo" class="grid hidden">
    <div class="card">
      <h3 class="title">Akun Saldo</h3>
      <div class="row cols-3">
        <input id="sName" class="input" placeholder="Nama akun (mis: BRI)" />
        <input id="sAwal" class="input" type="number" placeholder="Saldo sekarang" />
        <input id="sLimit" class="input" type="number" placeholder="Limit (opsional)" />
      </div>
      <div class="row cols-3 mt8">
        <button id="sAdd" class="btn primary">Tambah / Update</button>
        <button id="sDel" class="btn danger">Hapus</button>
        <div class="pill right" id="sumSaldo">Total: Rp 0</div>
      </div>
      <div id="sList" class="mt16"></div>
    </div>
  </section>

  <!-- ===== STOK ===== -->
  <section id="page-stok" class="grid hidden">
    <div class="card">
      <h3 class="title">Stok Barang</h3>
      <div class="row cols-4">
        <input id="tKode" class="input" placeholder="KODE" />
        <input id="tNama" class="input" placeholder="Nama" />
        <input id="tBeli" class="input" type="number" placeholder="H.Beli" />
        <input id="tJual" class="input" type="number" placeholder="H.Jual" />
      </div>
      <div class="row cols-3 mt8">
        <input id="tQty" class="input" type="number" placeholder="Stok Awal / Tambah" />
        <button id="tAdd" class="btn primary">Tambah / Update</button>
        <button id="tDel" class="btn danger">Hapus</button>
      </div>
      <div id="tList" class="mt16"></div>
    </div>
  </section>

  <!-- ===== AUDIT ===== -->
  <section id="page-audit" class="grid hidden">
    <div class="card">
      <h3 class="title">Audit Stok</h3>
      <div class="row cols-3">
        <input id="aKode" class="input" placeholder="KODE" />
        <input id="aReal" class="input" type="number" placeholder="Stok fisik (hitung nyata)" />
        <button id="aApply" class="btn primary">Simpan Audit</button>
      </div>
      <div class="row cols-2 mt8">
        <button id="aPrint" class="btn">Print Audit</button>
        <button id="aShare" class="btn">Share PNG</button>
      </div>
      <div id="aInfo" class="mt16 sub">Masukkan kode & stok fisik untuk menyesuaikan selisih.</div>
      <div id="aList" class="mt16"></div>
    </div>
  </section>

  <!-- ===== IN/OUT ===== -->
  <section id="page-inout" class="grid hidden">
    <div class="card">
      <h3 class="title">Pemasukan & Pengeluaran</h3>
      <div class="row cols-4" style="grid-template-columns:repeat(4,1fr)">
        <input id="ioDate" class="input" type="date" />
        <select id="ioAkun" class="input"></select>
        <select id="ioJenis" class="input">
          <option value="in">Pemasukan (+)</option>
          <option value="out">Pengeluaran (-)</option>
        </select>
        <input id="ioNilai" class="input" type="number" placeholder="Nominal" />
      </div>
      <input id="ioKet" class="input mt8" placeholder="Keterangan" />
      <div class="row cols-2 mt8">
        <button id="ioSave" class="btn primary">Simpan</button>
        <button id="ioClr" class="btn ghost">Bersihkan</button>
      </div>
      <div id="ioList" class="mt16"></div>
    </div>
  </section>

  <!-- ===== SETTINGS ===== -->
  <section id="page-settings" class="grid hidden">
    <div class="card">
      <h3 class="title">⚙️ Pengaturan</h3>
      <details open class="mt8">
        <summary><b>Profil Toko</b></summary>
        <div class="inner">
          <div class="row cols-3">
            <div><label>Nama Toko</label><input id="pName" class="input" placeholder="cth: Saufi Cell" /></div>
            <div><label>WhatsApp (opsional)</label><input id="pWa" class="input" placeholder="+62xxxx" /></div>
            <div><label>Logo (png/jpg)</label><input id="pLogo" class="input" type="file" accept="image/*" /></div>
          </div>
          <label class="mt8">Alamat</label>
          <textarea id="pAddr" class="input" rows="2" placeholder="Alamat toko"></textarea>
          <div class="row cols-2 mt8">
            <button id="pSave" class="btn primary">Simpan Profil</button>
            <button id="pClear" class="btn ghost">Kosongkan</button>
          </div>
        </div>
      </details>

      <details class="mt8">
        <summary><b>Pengaturan User / Login</b></summary>
        <div class="inner">
          <div class="row cols-3">
            <input id="uPass" class="input" placeholder="Password admin baru" />
            <select id="uTheme" class="input">
              <option value="dark">Tema: Dark</option>
              <option value="light">Tema: Light</option>
              <option value="auto">Tema: Auto</option>
            </select>
            <select id="uFont" class="input">
              <option value="14">Font: Kecil</option>
              <option value="15" selected>Font: Sedang</option>
              <option value="17">Font: Besar</option>
            </select>
          </div>
          <div class="row cols-2 mt8">
            <button id="uSave" class="btn primary">Simpan User</button>
            <button id="uLock" class="btn">Kunci Sekarang</button>
          </div>

      <hr style="border-color:var(--muted);margin:16px 0">
      <label>Ganti Background (opsional)</label>
      <div class="row" style="grid-template-columns: 2fr 1fr; gap: 8px; align-items:center;">
          <input id="bgFile" class="input" type="file" accept="image/*" />
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
              <button id="bgSave" class="btn primary">Simpan</button>
              <button id="bgClear" class="btn danger">Hapus</button>
          </div>
      </div>
      <div class="sub mt8">Pilih gambar untuk dijadikan latar belakang aplikasi (maks 2MB).</div>
        </div>
      </details>

      <details class="mt8">
        <summary><b>Pengaturan Saldo / Akun</b></summary>
        <div class="inner">
          <div class="row cols-3">
            <input id="paName" class="input" placeholder="Nama akun (mis: BRI)" />
            <input id="paAwal" class="input" type="number" placeholder="Saldo awal" />
            <input id="paLimit" class="input" type="number" placeholder="Limit (opsional)" />
          </div>
          <div class="row cols-3 mt8">
            <button id="paAdd" class="btn primary">Tambah / Update</button>
            <button id="paDel" class="btn danger">Hapus</button>
            <div class="pill right" id="paTotal">Total: Rp 0</div>
          </div>
          <div id="paList" class="mt16"></div>
        </div>
      </details>

      <details class="mt8">
        <summary><b>Backup & Restore</b></summary>
        <div class="inner">
          <div class="row cols-3">
            <button id="bkNow" class="btn">⬇️ Backup JSON</button>
            <button id="rsNow" class="btn">⬆️ Restore JSON</button>
            <button id="rstAll" class="btn danger">🗑️ Reset Semua Data</button>
          </div>
        </div>
      </details>
    </div>
  </section>
</main>

<!-- Bottom Nav -->
<nav class="bottomnav" id="nav" aria-label="Navigasi bawah">
  <a class="tab active" data-go="fisik">📦<div>Fisik</div></a>
  <a class="tab" data-go="digital">💳<div>Digital</div></a>
  <a class="tab" data-go="history">📜<div>History</div></a>
  <a class="tab" data-go="rekap">📈<div>Rekap</div></a>
</nav>

<!-- Login modal -->
<div id="lock" style="position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;z-index:100;align-items:center;justify-content:center">
  <div class="card" style="width:min(420px,92vw)">
    <h3 class="title">🔒 Login Admin</h3>
    <input id="pin" class="input" type="password" placeholder="Masukkan PIN" />
    <div class="row cols-2 mt16">
      <button id="unlock" class="btn primary">Masuk</button>
      <button id="toDark" class="btn">Tema Gelap/Terang</button>
    </div>
    <div class="sub mt8">PIN default: <b>1234</b> • bisa diubah di Pengaturan › User</div>
  </div>
</div>

<script src="script.js" defer></script>
</body>
</html>
